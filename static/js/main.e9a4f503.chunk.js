(this["webpackJsonplampethere-emulator"]=this["webpackJsonplampethere-emulator"]||[]).push([[0],{101:function(e,t){},102:function(e,t){},104:function(e,t){},106:function(e,t){},118:function(e,t,n){"use strict";n.r(t);var o=n(1),c=n(0),r=n.n(c),a=n(57),s=n.n(a),i=(n(67),n(15)),l=n(16),u=n(17),d=n(19),p=n(18),h=n(20),v=n(58),b=n.n(v),f=n(21);function m(){var e=Object(h.a)(["\n  ","\n"]);return m=function(){return e},e}function g(){var e=Object(h.a)(["\n  display: inline-block;\n  width: 100px;\n  height: 20px;\n  ","\n  border: 1px solid #ccc;\n"]);return g=function(){return e},e}function j(){var e=Object(h.a)(["\n  border: 1px solid black;\n  width: 500px;\n"]);return j=function(){return e},e}var O=f.a.div(j()),x=f.a.span(g(),(function(e){var t=e.color;return"background-color: ".concat(t,";")})),C=f.a.div(m(),(function(e){var t=e.connected;return"color: ".concat(t?"green":"red",";")})),S=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var o;return Object(l.a)(this,n),(o=t.call(this,e)).toggleConnect=function(){if(o.state.connected)console.log("Disconnecting..."),o.client&&(o.client.end(),o.setState({connected:!1}));else{console.log("Connecting...");var e=o.state,t=(e.groupId,e.deviceId),n=o.props.serverConfig,c=n.server,r=n.port,a=n.username,s=n.password,i=b.a.connect("ws://".concat(c,":").concat(r),{username:a,password:s,will:{topic:"/lampethere/device/".concat(t,"/online"),payload:"false"}});i.on("connect",(function(){console.log("Connected"),o.setState({connected:!0}),i.subscribe("/lampethere/device/".concat(t,"/#"),(function(e){e?console.error(e):(i.publish("/lampethere/device/".concat(t,"/online"),"true",{retain:!0}),i.publish("/lampethere/device/".concat(t,"/version"),"1.0.0"))}))})),i.on("error",(function(e){o.setState({connected:!1}),console.error(e),i.end()})),i.on("message",(function(e,n){switch(console.log(t,e,n.toString()),e){case"/lampethere/device/".concat(t,"/message"):o.setState({receivedColor:JSON.parse(n.toString()).color});break;case"/lampethere/device/".concat(t,"/config/color/set"):o.setState({color:n.toString()});break;case"/lampethere/device/".concat(t,"/config/name/set"):o.setState({name:n.toString()});break;case"/lampethere/device/".concat(t,"/config/groups/set"):var c=JSON.parse(n.toString());o.setState({groups:c}),c.forEach((function(e){o.client.subscribe("/lampethere/group/".concat(e,"/message"),(function(e){e&&console.log(e)}))}))}e.endsWith("/message")&&o.setState({receivedColor:JSON.parse(n.toString()).color})})),o.client=i}},o.onChange=function(e){o.setState(Object(i.a)({},e.target.name,e.target.value))},o.pushThzeButton=function(){var e=o.state.color;o.state.groups.forEach((function(t){console.log("group",t,e),o.client.publish("/lampethere/group/".concat(t,"/message"),JSON.stringify({color:e}))}))},o.state={deviceId:o.props.deviceId,color:"#ffffff",receivedColor:"#ffffff",connected:!1,groups:[],name:"unset"},o}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.receivedColor,n=e.deviceId,c=e.color,r=e.groups,a=e.name,s=e.connected;return Object(o.jsxs)(O,{children:[Object(o.jsxs)(C,{connected:s,children:["Connected:",s.toString()]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"deviceId",children:"Device ID:"}),Object(o.jsx)("input",{type:"text",value:n,onChange:this.onChange,name:"deviceId",id:"deviceId"})]}),Object(o.jsxs)("div",{children:["Color:",Object(o.jsx)(x,{color:c})]}),Object(o.jsxs)("div",{children:["name: ",a]}),Object(o.jsxs)("div",{children:["groups: ",JSON.stringify(r)]}),Object(o.jsxs)("div",{children:["Received color:",Object(o.jsx)(x,{color:t})]}),Object(o.jsx)("button",{onClick:this.toggleConnect,children:s?"Disconnect":"Connect"}),Object(o.jsx)("button",{onClick:this.pushThzeButton,disabled:!s,children:"Push thze button"})]})}}]),n}(r.a.Component),w=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var o=arguments.length,c=new Array(o),r=0;r<o;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={numberOfLamps:3,server:"localhost",port:9001,username:"lampethere",password:"lampethere"},e.addLamp=function(){e.setState((function(e){return{numberOfLamps:e.numberOfLamps+1}}))},e.removeLamp=function(){e.setState((function(e){var t=e.numberOfLamps;return{numberOfLamps:Math.max(t-1,0)}}))},e.onInputChange=function(t){e.setState(Object(i.a)({},t.target.name,t.target.value))},e}return Object(u.a)(n,[{key:"render",value:function(){for(var e=[],t={server:this.state.server,port:this.state.port,username:this.state.username,password:this.state.password},n=0;n<this.state.numberOfLamps;n++)console.log(n),e.push(Object(o.jsx)(S,{deviceId:"device".concat(n+1),serverConfig:t},n));return console.log("lamps",e),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{children:["Server:",Object(o.jsx)("input",{type:"text",name:"server",onChange:this.onInputChange,value:this.state.server})]}),Object(o.jsxs)("div",{children:["Port:",Object(o.jsx)("input",{type:"number",name:"port",onChange:this.onInputChange,value:this.state.port})]}),Object(o.jsxs)("div",{children:["Username:",Object(o.jsx)("input",{type:"text",name:"username",onChange:this.onInputChange,value:this.state.username})]}),Object(o.jsxs)("div",{children:["Password:",Object(o.jsx)("input",{type:"password",name:"password",onChange:this.onInputChange,value:this.state.password})]}),Object(o.jsx)("button",{onClick:this.addLamp,children:"Add lamp"}),Object(o.jsx)("button",{onClick:this.removeLamp,children:"Remove lamp"}),e]})}}]),n}(r.a.Component),I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,119)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),o(e),c(e),r(e),a(e)}))};s.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(w,{})}),document.getElementById("root")),I()},67:function(e,t,n){},71:function(e,t){},73:function(e,t){}},[[118,1,2]]]);
//# sourceMappingURL=main.e9a4f503.chunk.js.map